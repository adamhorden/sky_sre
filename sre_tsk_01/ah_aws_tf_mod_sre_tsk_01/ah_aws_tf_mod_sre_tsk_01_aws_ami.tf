# Copyright (c) 2023 - 2023 Adam Horden <adam.horden@horden.engineering>

# ----------------------------------------------------------------------------------------
# Data:
# ----------------------------------------------------------------------------------------

# data.aws_ami.this

data "aws_ami" "this" {

  # --------------------------------------------------------------------------------------
  # Filter:
  # --------------------------------------------------------------------------------------

  filter {

    # ------------------------------------------------------------------------------------
    # Argument:
    # ------------------------------------------------------------------------------------

    name = format(
      "%s",
      "name"
    )

    # ------------------------------------------------------------------------------------
    # Argument:
    # ------------------------------------------------------------------------------------

    values = formatlist(
      "%s",
      tolist(
        [

          # ------------------------------------------------------------------------------
          # Argument:
          # ------------------------------------------------------------------------------

          format(
            "%s",
            "debian-10-arm64-*"
          )

        ]
      )
    )

  }

  # --------------------------------------------------------------------------------------
  # Filter:
  # --------------------------------------------------------------------------------------

  filter {

    # ------------------------------------------------------------------------------------
    # Argument:
    # ------------------------------------------------------------------------------------

    name = "virtualization-type"

    # ------------------------------------------------------------------------------------
    # Argument:
    # ------------------------------------------------------------------------------------

    values = formatlist(
      "%s",
      tolist(
        [

          # ------------------------------------------------------------------------------
          # Argument:
          # ------------------------------------------------------------------------------

          format(
            "%s",
            "hvm"
          )

        ]
      )
    )

  }

  # --------------------------------------------------------------------------------------
  # Argument:
  # --------------------------------------------------------------------------------------

  most_recent = format(
    "%t",
    "true"
  )

  # --------------------------------------------------------------------------------------
  # Argument:
  # --------------------------------------------------------------------------------------

  owners = formatlist(
    "%s",
    tolist(
      [

        # --------------------------------------------------------------------------------
        # Argument:
        # --------------------------------------------------------------------------------

        format(
          "%s",
          "136693071363"
        )

      ]
    )
  )

}
